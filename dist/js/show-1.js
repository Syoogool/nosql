$(function(){function t(t){if(console.log(t),0==t.code){$(".wrapper").css("display","block"),$(".show-charts").highcharts({chart:{zoomType:"xy"},title:{text:"缓存方案错误率、吞吐率对比图",style:{fontWeight:"bold"}},credits:{enabled:!1},xAxis:{categories:t.content[1].struct,crosshair:!0},yAxis:[{title:{text:"吞吐率",style:{color:Highcharts.getOptions().colors[1]}},labels:{format:"{value} 次/秒",style:{color:Highcharts.getOptions().colors[1]}}},{labels:{format:"{value} %",style:{color:Highcharts.getOptions().colors[0]}},title:{text:"错误率",style:{color:Highcharts.getOptions().colors[0]}},alternateGridColor:"#FDFFD5",tickInterval:1,ceiling:3,allowDecimals:Boolean,plotLines:[{label:{text:"合理错误率",style:{fontWeight:"bold"},align:"right",x:65,y:3},color:"red",dashStyle:"solid",value:.5,width:1}],opposite:!0}],tooltip:{shared:!0},legend:{layout:"vertical",align:"left",verticalAlign:"top",borderWidth:0,backgroundColor:Highcharts.theme&&Highcharts.theme.legendBackgroundColor||"#FFFFFF"},series:[{name:"错误率",type:"column",yAxis:1,data:t.content[1].cuowulv,tooltip:{valueSuffix:" %"}},{name:"吞吐率",type:"column",data:t.content[1].tuntuliang,tooltip:{valueSuffix:"次/秒"}}]});var n=String(t.content[0].fangan).slice(0,9);"memcached"!==n?($("#args1").append("并发量为"+t.content[0].bingfa+", 缓存"+t.content[0].mingzhong+", 缓存中存储的"+t.content[0].shujuliang+", 缓存操作类型为"+t.content[0].duxie+", "+t.content[0].chijiu+", 缓存与服务器之间"+t.content[0].gongwang+", "+t.content[0].jiegou),$("#title1").text("测试结果"),$("#title2").text("Redis数据扩容方案"),$("#title3").text("Redis数据备份方案"),$("#title4").text("Redis数据迁移方案"),$("#title5").text("经过我们数月对三种缓存的性能测试，利用正交法和余弦向量法科学有效地分析得出了不同使用情况下，缓存类型架构数据结构的最优方案，因此根据您的选择，在合理的错误率允许范围内，为您推荐以下缓存使用方案："),$("#args2").append(t.content[0].fangan),$("#args3").append("推荐方案: "+t.content[0].fangan),$("#args4").append("错误率: "+t.content[0].cuowulv+"%"),$("#args5").append("吞吐率: "+t.content[0].tuntuliang+"次/秒"),$("#args51").append("服务器台数："+t.content[0].nummachine+"台"),$("#args6").append(t.content[0].kuorong),$("#args7").append(t.content[0].beifen),$("#args8").append(t.content[0].qianyi),$(".memcached").remove()):($("#args1").append("并发量为"+t.content[0].bingfa+", 缓存"+t.content[0].mingzhong+", 缓存中存储的"+t.content[0].shujuliang+", 缓存操作类型为"+t.content[0].duxie+", "+t.content[0].chijiu+", 缓存与服务器之间"+t.content[0].gongwang+", "+t.content[0].jiegou),$("#title1").text("测试结果"),$("#title2").text("Memcached数据扩容方案"),$("#title3").text("Memcached数据备份方案"),$("#title4").text("Memcached数据迁移方案"),$("#title5").text("经过我们数月对三种缓存的性能测试, 分析得出各种缓存使用场景最优方案结果 , 在可接受的错误率范围内:"),$("#args2").append(t.content[0].fangan),$("#args3").append(t.content[0].fangan),$("#args4").append("错误率: "+t.content[0].cuowulv+"%"),$("#args5").append("吞吐率: "+t.content[0].tuntuliang+"次/秒"),$("#args51").append("服务器台数："+t.content[0].nummachine+"台"),$("#args6").append(t.content[0].kuorong),$("#args7").append(t.content[0].beifen),$("#args8").append(t.content[0].qianyi),$("#ml1").append(t.content[2].title),$("#ml2").append("<strong>功能及特点: </strong>&nbsp;&nbsp; "+t.content[2].title1),$("#ml3").append("<strong>缺点及不足:</strong>&nbsp;&nbsp; "+t.content[2].title2),$("#ml4").append("<strong>部署架构:</strong>&nbsp;&nbsp; "+t.content[2].title3),$("#mr1").append(t.content[3].title),$("#mr2").append("<strong>Magent的作用:</strong> &nbsp;&nbsp;"+t.content[3].title11),$("#mr3").append("<strong>Repcached的作用:</strong> &nbsp;&nbsp;"+t.content[3].title12),$("#mr4").append(" <strong>Keepalived的作用:</strong> &nbsp;&nbsp;"+t.content[3].title13),$("#mr5").append(" <strong>架构功能:</strong> &nbsp;&nbsp;"+t.content[3].title2),$("#mr6").append(" <strong>部署架构: </strong>&nbsp;&nbsp;"+t.content[3].title3),$("#m1").append(t.content[4].title),$("#m2").append("<strong>特性及功能:</strong> &nbsp;&nbsp;"+t.content[4].title11),$("#m3").append("<strong>集群功能:</strong> &nbsp;&nbsp;"+t.content[4].title12),$("#m4").append(" <strong>备份容灾功能:</strong> &nbsp;&nbsp;"+t.content[4].title13),$("#m5").append(" <strong>数据同步功能:</strong> &nbsp;&nbsp;"+t.content[4].title14),$("#m6").append(" <strong>热加载功能: </strong>&nbsp;&nbsp;"+t.content[4].title15),$("#m7").append(" <strong>MCrouter IP地址: </strong>&nbsp;&nbsp;"+t.content[4].title2),$("#img1").attr("src","http://localhost:8006/images/agentcluster.png"),$("#img2").attr("src","http://localhost:8006/images/agentcluster.png"),$("#img3").attr("src","http://localhost:8006/images/agentcluster.png"))}else if(102==t.code||101==t.code){var e=dialog({title:"友情提示",content:"集群列表不存在,请返回重新选择！",okValue:"确定",ok:function(){location.href=history.back(-1)},cancelValue:"取消",cancel:!1,width:200,height:50});e.showModal(),e.width(320),e.height(60)}else{console.log("test1");var e=dialog({title:"友情提示",content:"请求失败,请返回重新选择！",okValue:"确定",ok:function(){location.href=history.back(-1)},cancelValue:"取消",cancel:!1,color:red,width:200,height:50});e.color(black),e.showModal(),e.width(320),e.height(60),console.log("test2"),location.href=history.go(-1)}}$("nav li").click(function(){if($(".scheme").hide(),$(this).children("a").hasClass("active")){$(this).children("a").removeClass("active");var t=$(this).children("a").attr("href");return $(t).fadeOut(),!1}$("nav li a").removeClass("active"),$(this).children("a").addClass("active");var n=$(this).children("a").attr("href");return console.log(n),$(n).fadeIn(),!1});var n=Cookies.get("data1"),e=Cookies.get("data2"),o=Cookies.get("data3"),a=Cookies.get("data4"),s=Cookies.get("data5"),i=Cookies.get("data6"),c=Cookies.get("data7");$.ajax({type:"GET",url:"http://localhost:8006/getresult",data:{bingfaliang:n,shujuliang:e,gongwang:o,duxie:a,chijiu:s,jiegou:i,mingzhong:c},contentType:"application/json",dataType:"json",timeout:100,cache:!1,async:!1,beforeSend:function(){console.log("开始返回数据")},error:function(t){console.log(t)},success:t})});